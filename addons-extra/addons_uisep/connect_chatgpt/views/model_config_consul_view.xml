<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="config_consul_tree" model="ir.ui.view">
            <field name="name">config_consul_tree</field>
            <field name="model">models.config.consul</field>
            <field eval="100" name="priority"/>
            <field name="arch" type="xml">
                <tree string="Configurar parser email" create="true" import="true">
                    <field name="name"/>
                    <field name="question_search" />
                    <field name="model_id" />                  
                </tree>
            </field>
        </record>
        <record id="config_consul_form" model="ir.ui.view">
            <field name="name">config_consul_form</field>
            <field name="model">models.config.consul</field>
            <field eval="100" name="priority"/>
            <field name="arch" type="xml">
                <form string="Configurar parser email">
                    <sheet>
                        <div class="oe_title">
                            <h1>
                                <field name="name" required="1"/>
                            </h1>
                        </div>
                        <group>                        
                            <group>                                                               
                                <field name="model_id" />
                                <field name="rel_field_id" required="1" domain="[('model_id', '=', model_id), ('store', '=', True)]" options="{'no_quick_create': True,'no_create_edit': True}"/> 
                                <field name="state_field_id" required="0" domain="[('model_id', '=', model_id), ('store', '=', True)]" options="{'no_quick_create': True,'no_create_edit': True}"/> 
                                <field name="state_content" attrs="{'invisible': [['state_field_id','=',False]],'required': [['state_field_id','!=',False]]}"/>
                                <field name="question_search" required="1"/>
                            </group>
                            <group>
                                <field name="create_date" string="Fecha creacion"/>
                                <field name="other_filter" attrs="{'invisible': [['state_field_id','=',False]]}"/>
                                <field name="filter_field_id" domain="[('model_id', '=', model_id), ('store', '=', True)]" options="{'no_quick_create': True,'no_create_edit': True}" attrs="{'invisible': [['other_filter','=',False]],'required': [['other_filter','!=',False]]}"/>
                                <field name="filter_content" attrs="{'invisible': [['filter_field_id','=',False]],'required': [['filter_field_id','!=',False]]}"/>
                            </group>   
                        </group>   
                        <notebook>
                            <page string="Detalles">
                                <field name="config_consul_line_ids" mode="tree" >
                                    <tree string="Detalles" editable="bottom">
                                        <field name="sequence" widget="handle"/>
                                        <field name="name" required="1"/>
                                        <field name="fields_ids" domain="[('model_id', '=', parent.model_id),('store', '=', True)]" required="1" options="{'no_quick_create': True,'no_create_edit': True}"/>
                                        <field name="model_field" invisible="1"/>
                                        <field name="followone_field_id" domain="[('model_id.model', '=', model_field), ('store', '=', True)]" options="{'no_quick_create': True,'no_create_edit': True}"/>                                        
                                    </tree>
                                </field>                                
                            </page>
                        </notebook> 
                    </sheet>                
                </form>
            </field>
        </record>
        <record id="action_config_consul" model="ir.actions.act_window">
            <field name="name">Configurar modulos a consultar</field>
            <field name="res_model">models.config.consul</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="config_consul_tree"/>
            <field name="context">{}</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                        Crear nuevos registros
                </p>
            </field>
        </record>
        <menuitem id="submenu_config_consul" 
            name="Configurar modulos a consultar" 
            parent="connect_chatgpt.submenu_config_chatgpt_ia" 
            action="action_config_consul" 
            sequence="3"/>

    </data>
</odoo>