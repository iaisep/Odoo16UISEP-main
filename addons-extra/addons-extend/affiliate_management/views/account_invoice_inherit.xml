<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

              <record id="invoice_supplier_inherit_form" model="ir.ui.view">
                  <field name="name">account.move.inherit.supplier.form</field>
                  <field name="model">account.move</field>
                  <field name="inherit_id" ref="account.view_move_form" />
                  <field name="arch" type="xml">
                    <xpath expr="//notebook/page[2]" position="after">
                        <page string="Reports">
                            <field name="aff_visit_id" nolabel="1"/>
                        </page>
                    </xpath>
                  </field>
              </record>

              <record id="action_move_out_affiliate_invoice_type" model="ir.actions.act_window">
                <field name="name">Affiliate Invoices</field>
                <field name="res_model">account.move</field>
                <field name="view_mode">tree,kanban,form</field>
                <field name="view_id" ref="account.view_out_invoice_tree"/>
                <field name="search_view_id" ref="account.view_account_invoice_filter"/>
                <field name="domain">[('move_type', '=', 'in_invoice'), ('aff_visit_id', '!=', False)]</field>
                <field name="context">{'default_move_type': 'in_invoice'}</field>
                <field name="help" type="html">
                  <p class="o_view_nocontent_smiling_face">
                    Create an affiliate invoice
                  </p><p>
                    Create invoices, register payments and keep track of the discussions with your affiliates.
                  </p>
                </field>
            </record>

            <menuitem name="Invoicing"
              id="affiliate_invoicing_visit_menu"
              parent="affiliate_manager_menu_base_root"
              sequence='3'
            />
            
            <menuitem name="Invoice"
              id="affiliate_invoice_visit_menu"
              parent="affiliate_invoicing_visit_menu"
              action="action_move_out_affiliate_invoice_type"
              groups='affiliate_management.affiliate_security_user_group'
            />
    </data>
</odoo>
