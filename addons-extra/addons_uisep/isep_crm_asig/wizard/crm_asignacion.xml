<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!--views-->
       
        <record model="ir.ui.view" id="view_crm_asignacion_form">
            <field name="name">crm.asignacion.form</field>
            <field name="model">crm.asignacion</field>
            <field name="arch" type="xml">
                <form string="Asignacion de leads">      
                
                    <group>
                        <field name="crm_lead_ids" widget="many2many_tags" options="{'no_create': True, 'no_open': True}"/>
                        <field name="user_lead_id" options="{'no_create': True, 'no_open': True}"/>                  
                        <field name="team_lead_id" options="{'no_create': True, 'no_open': True}"/>                     
                    </group>              
                    <footer>
                        <button name="action_asignacion" string="Asignar" type="object" class="btn-primary"/>
                        <button string="Cancelar" class="btn-secondary" special="cancel"/>
                   </footer>
                </form>                
            </field>
        </record>      
      

        <!--actions-->
        <record id="action_crm_asignacion" model="ir.actions.server">
            <field name="name">Asignación de leads</field>
            <field name="model_id" ref="crm.model_crm_lead"/>
            <field name="binding_model_id" ref="crm.model_crm_lead"/>
            <field name="state">code</field>
            <field name="code">
               action ={
                    'type': 'ir.actions.act_window',
                    'name': 'Asignación de leads',
                    'res_model': 'crm.asignacion',                    
                    'target': 'new',
                    'views':[(env.ref('isep_crm_asig.view_crm_asignacion_form').id, 'form')],
                    'context': {'default_crm_lead_ids': [(6,0,records.ids)]},                
               }
            
            </field>
        </record>
    </data>
</odoo>
