<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="custom_survey_user_input_form" model="ir.ui.view">
            <field name="name">survey.user_input.form</field>
            <field name="model">survey.user_input</field>
            <field name="inherit_id" ref="survey.survey_user_input_view_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='test_entry']" position="after">
                    <field name="survey_type" widget="radio" options="{'horizontal': true}"/>
                </xpath>

                <xpath expr="//field[@name='access_token']" position="after">
                    <field name="comment"  readonly="0" force_save="1" />
                </xpath>

                <xpath expr="//notebook" position="inside">
                    <page string="Libreta" groups="base.group_no_one" attrs="{'invisible': [('survey_type','not in', ('exam','assignment') )]}"   >
                        <group>
                            <field name="channel_partner_id"/>
                            <field name="admission_id"/>
                            <field name="op_subject_id" readonly="0" />
                            <field name="course_id"/>
                            <field name="batch_id"/>
                            <field name="result_id" readonly="1" force_save="1" />
                            <field name="rated_by" readonly="1" force_save="1" />
                            <field name="gradebook_student_id"/>
                            <field name="gradebook_subject_id"/>
                            <field name="answer_score_total"/>
                        </group>
                    </page>
                </xpath>

                <xpath expr="//button[@name='action_print_answers']" position="after">
                     <field name="result_id" invisible="1" />
                    <button name='send_result' confirm="Una calificaciÃ³n enviada no puede ser modificada. Verifique que la calificaciÃ³n este actualizada." string='Enviar a Libreta'  attrs="{'invisible': ['|',('survey_type','not in', ('exam','assignment')) , ('result_id','!=', False)  ]}"   class="btn btn-info" type='object'/>
                </xpath>

                <xpath expr="//notebook/page/field[@name='user_input_line_ids']/tree/field[@name='question_sequence']" position="before">
                        <button name='open_result' string='Calificar' 
                        attrs="{'column_invisible': ['|',('parent.survey_type','not in', ('exam','assignment') ) , ('parent.result_id','!=', False)  ]}"  
                        class="btn btn-info" type='object'/>
                </xpath>
            </field>
        </record>
    </data>
</odoo>
