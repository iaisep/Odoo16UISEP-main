<odoo>
	<data>
		<template id="report" name="Report">
			<t t-call="portal.portal_layout">

				<t t-set="no_breadcrumbs" t-value="True" />
				<t t-set="affiliate_breadcrumbs_searchbar" t-value="True" />


				<t t-call="affiliate_management.affiliate_portal_searchbar">
					<t t-set="title">Reports</t>
				</t>

				<div class='o_portal_wrap my-3'>
					<div class="oe_structure" id="oe_structure_portal_affiliate_report" />
					<div class="container">
						<div class="row justify-content-center">
							<div class="col-md-12">
								<div class="card">
									<div class="card-body">
										<div class="d-flex flex-column flex-md-row flex-column-reverse">
											<div class="col-md-8 mb-md-5 mt-4 mt-md-0 pe-2">
												<div class="container">
													<div class="p-2"
														style="border: 2px solid #3aadaa;border-radius: 20px;">
														<h4>
															<svg xmlns="http://www.w3.org/2000/svg"
																width="24" height="24"
																fill="#3aadaa"
																class="bi bi-currency-exchange"
																viewBox="0 0 16 16">
																<path
																	d="M0 5a5.002 5.002 0 0 0 4.027 4.905 6.46 6.46 0 0 1 .544-2.073C3.695 7.536 3.132 6.864 3 5.91h-.5v-.426h.466V5.05c0-.046 0-.093.004-.135H2.5v-.427h.511C3.236 3.24 4.213 2.5 5.681 2.5c.316 0 .59.031.819.085v.733a3.46 3.46 0 0 0-.815-.082c-.919 0-1.538.466-1.734 1.252h1.917v.427h-1.98c-.003.046-.003.097-.003.147v.422h1.983v.427H3.93c.118.602.468 1.03 1.005 1.229a6.5 6.5 0 0 1 4.97-3.113A5.002 5.002 0 0 0 0 5zm16 5.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0zm-7.75 1.322c.069.835.746 1.485 1.964 1.562V14h.54v-.62c1.259-.086 1.996-.74 1.996-1.69 0-.865-.563-1.31-1.57-1.54l-.426-.1V8.374c.54.06.884.347.966.745h.948c-.07-.804-.779-1.433-1.914-1.502V7h-.54v.629c-1.076.103-1.808.732-1.808 1.622 0 .787.544 1.288 1.45 1.493l.358.085v1.78c-.554-.08-.92-.376-1.003-.787H8.25zm1.96-1.895c-.532-.12-.82-.364-.82-.732 0-.41.311-.719.824-.809v1.54h-.005zm.622 1.044c.645.145.943.38.943.796 0 .474-.37.8-1.02.86v-1.674l.077.018z" />
															</svg>
															<a href="/my/order"> Earning by
														Orders(Pay Per Sale) <small class="ml8">
																	<t t-if="pps_count">
																		<span
																			class="badge text-bg-secondary rounded-pill"
																			t-esc="pps_count" />

																	</t>
																	<t t-if="not pps_count">
																		There are currently no
														earnings for your account.
																	</t>
																</small>
															</a>
														</h4>
														With Pay Per Sale Program of Affiliate
														Management, publisher will get paid (certain
														amount of commission) for every <b>
															Sale Generated
														</b>
														by the advertisement which he published on
														his website. </div>
													<br />
													<t t-if="enable_ppc">
														<div class="p-2"
															style="border: 2px solid #3aadaa;border-radius: 20px;">
															<h4>
																<svg
																	xmlns="http://www.w3.org/2000/svg"
																	width="24" height="24"
																	fill="#3aadaa"
																	class="bi bi-currency-exchange"
																	viewBox="0 0 16 16">
																	<path
																		d="M0 5a5.002 5.002 0 0 0 4.027 4.905 6.46 6.46 0 0 1 .544-2.073C3.695 7.536 3.132 6.864 3 5.91h-.5v-.426h.466V5.05c0-.046 0-.093.004-.135H2.5v-.427h.511C3.236 3.24 4.213 2.5 5.681 2.5c.316 0 .59.031.819.085v.733a3.46 3.46 0 0 0-.815-.082c-.919 0-1.538.466-1.734 1.252h1.917v.427h-1.98c-.003.046-.003.097-.003.147v.422h1.983v.427H3.93c.118.602.468 1.03 1.005 1.229a6.5 6.5 0 0 1 4.97-3.113A5.002 5.002 0 0 0 0 5zm16 5.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0zm-7.75 1.322c.069.835.746 1.485 1.964 1.562V14h.54v-.62c1.259-.086 1.996-.74 1.996-1.69 0-.865-.563-1.31-1.57-1.54l-.426-.1V8.374c.54.06.884.347.966.745h.948c-.07-.804-.779-1.433-1.914-1.502V7h-.54v.629c-1.076.103-1.808.732-1.808 1.622 0 .787.544 1.288 1.45 1.493l.358.085v1.78c-.554-.08-.92-.376-1.003-.787H8.25zm1.96-1.895c-.532-.12-.82-.364-.82-.732 0-.41.311-.719.824-.809v1.54h-.005zm.622 1.044c.645.145.943.38.943.796 0 .474-.37.8-1.02.86v-1.674l.077.018z" />
																</svg>
																<a href="/my/traffic"> Earning by
															Traffic(Pay Per Click) <small
																		class="ml8">
																		<t t-if="ppc_count">
																			<span
																				class="badge text-bg-secondary rounded-pill"
																				t-esc="ppc_count" />
																		</t>
																		<t t-if="not ppc_count">
															There are currently no earnings for your
															account.
																		</t>
																	</small>
																</a>
															</h4>
															With Pay Per Click Program of Affiliate
															Mangement, publisher will get paid
															(certain amount of commission) for <b>
															Directing Traffic
															</b>
															to advertiser website from the ad which
															he advertise on his site. </div>
													</t>
												</div>
											</div>
											<div
												class="col-md-4 report_amount d-flex justify-content-md-end">
												<div class="me-md-1 ms-sm-2 ms-md-0">
													<strong>
														Pending Amount:
													</strong>
													<span>
														<t t-esc="currency_id.symbol" />
														<t t-esc="pending_amt" />
													</span>
													<br />
													<div style="font-size: 12px;color: #23527c;">
														(* Report which state is confirmed or
														invoiced but not paid)
													</div>
													<strong>
														Approved Amount:
													</strong>
													<span>
														<t t-esc="currency_id.symbol" />
														<t t-esc="approved_amt" />
													</span>
													<div style="font-size: 12px;color: #23527c;">
														(* Report which state is paid)
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</t>

		</template>
		<template id="affiliate_traffic" name="Affiliate Traffic">
			<t t-call="portal.portal_layout">

				<t t-set="no_breadcrumbs" t-value="True" />
				<t t-set="affiliate_breadcrumbs_searchbar" t-value="True" />


				<t t-call="affiliate_management.affiliate_portal_searchbar">
					<t t-set="title">Traffic Earnings</t>
				</t>

				<div class="oe_structure" id="oe_structure_portal_affiliate_ppc_list" />
				<t t-if="traffic" t-call="portal.portal_table">
					<thead>
						<tr class="active">
							<th>Click To Check Details</th>
							<th>Item Name</th>
							<th>Item Type</th>
							<th>IP Address</th>
							<th>Convert Date</th>
							<th>Commission Value</th>
							<th>State</th>
						</tr>
					</thead>
					<t t-foreach="traffic" t-as="t">
						<tr>
							<td>
								<a t-attf-href="/my/traffic/{{t.id}}?{{keep_query()}}">
									<t t-esc="t.name" />
								</a>
							</td>
							<td>
								<t t-if="t.affiliate_type == 'product'">
									<a t-attf-href="/shop/product/{{t.type_id}}?{{keep_query()}}">
										<t t-esc="t.type_name" />
									</a>
								</t>
								<t t-if="t.affiliate_type == 'category'">
									<a t-attf-href="/shop/category/{{t.type_id}}?{{keep_query()}}">
										<t t-esc="t.type_name" />
									</a>
								</t>
							</td>
							<td>
								<span t-field="t.affiliate_type" />
							</td>
							<td>
								<span t-field="t.ip_address" />
							</td>
							<td>
								<span t-field="t.convert_date" />
							</td>
							<td>
								<span t-field="t.commission_amt"
									t-options='{"widget": "monetary", "display_currency": t.currency_id}' />
							</td>
							<td>
								<span t-field="t.state" />
							</td>
						</tr>
					</t>
				</t>
				<p t-else="">There are currently no earnings for your account.</p>
			</t>

		</template>
		<template id="traffic_form" name="Traffic Show">
			<t t-call="portal.portal_layout">
				<t t-set="no_breadcrumbs" t-value="True" />
				<t t-set="affiliate_breadcrumbs_searchbar" t-value="True" />

				<t t-call="affiliate_management.affiliate_portal_searchbar">
					<t t-set="title">Traffic Report Detail</t>
				</t>

				<div class='o_portal_wrap my-3'>
					<div class="oe_structure" id="oe_structure_portal_affiliate_ppc_details" />
					<div class="row justify-content-center">
						<div class="col-md-12">
							<div class="card">
								<div class="card-body">
									<div class="mt16 mb-3">
										<div class="mb8">
											<strong>
												Date :
											</strong>
											<span t-field="traffic_detail.convert_date"
												t-options='{"widget": "date"}' />
										</div>
										<div class="mb8">
											<strong>
												Traffic :
											</strong>
											<span t-field="traffic_detail.name" />
										</div>
										<div class="mb8">
											<strong>
												Traffic State :
											</strong>
											<span t-field="traffic_detail.state" />
										</div>
										<hr />
										<div class="row">
											<span class="col-md-2">
												<strong>
													Product Detail :
												</strong>
											</span>
											<span class="col-md-4">
												<span t-field="traffic_detail.type_name" />
											</span>
											<span class="col-md-2">
												<strong>
													Program :
												</strong>
											</span>
											<span class="col-md-4">
												<t t-if="not traffic_detail.sales_order_line_id">
													<span
														t-field="traffic_detail.affiliate_program_id.name" />
												</t>
											</span>
										</div>
										<div class="row">
											<span class="col-md-2">
												<strong>
													Order value :
												</strong>
											</span>
											<span class="col-md-4">
												<span t-field="traffic_detail.price_total" />
											</span>
											<span class="col-md-2">
												<strong>
													Commission Matrix :
												</strong>
											</span>
											<span class="col-md-2 text-start">
												<span t-field="traffic_detail.amt_type" /> per item </span>
										</div>
										<div class="row">
											<span class="col-md-2">
												<strong>
													Commission On :
												</strong>
											</span>
											<span class="col-md-4 text-start ">
												<span t-field="traffic_detail.affiliate_type" />
											</span>
											<span class="col-md-2">
												<strong>
													Commission Amt :
												</strong>
											</span>
											<span class="col-md-2 text-start">
												<span t-field="traffic_detail.commission_amt"
													t-options='{"widget": "monetary", "display_currency": traffic_detail.currency_id}' />
											</span>
										</div>
										<div class="row">
											<span class="col-md-2">
												<strong>
													Invoice State :
												</strong>
											</span>
											<span class="col-md-4">
												<span t-field="traffic_detail.act_invoice_id.state" />
												<t
													t-if="traffic_detail.act_invoice_id.state == 'paid'">
													<span>
														<a
															t-attf-href="/my/invoice/{{traffic_detail.act_invoice_id.id}}?{{keep_query()}}">
															<t
																t-esc="traffic_detail.act_invoice_id.number" />
														</a>
													</span>
												</t>
											</span>
											<span class="col-md-2">
												<strong>
													IP Address :
												</strong>
											</span>
											<span class="col-md-2 text-start">
												<span t-field="traffic_detail.ip_address" />
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</t>

		</template>
		<!-- ORDER TREE AND FORM PPS -->
		<template id="affiliate_order" name="Affiliate Order">
			<t t-call="portal.portal_layout">
				<t t-set="no_breadcrumbs" t-value="True" />
				<t t-set="affiliate_breadcrumbs_searchbar" t-value="True" />

				<t t-call="affiliate_management.affiliate_portal_searchbar">
					<t t-set="title">Order Earnings</t>
				</t>

				<div class="oe_structure" id="oe_structure_portal_affiliate_order_list" />
				<t t-if="traffic" t-call="portal.portal_table">
					<thead>
						<tr class="active">
							<th>Click To Check Details</th>
							<th>Item Name</th>
							<th>Item Type</th>
							<th>Convert Date</th>
							<th>Commission Value</th>
							<th>State</th>
						</tr>
					</thead>
					<t t-foreach="traffic" t-as="t">
						<tr>
							<td>
								<a t-attf-href="/my/order/{{t.id}}?{{keep_query()}}">
									<t t-esc="t.name" />
								</a>
							</td>
							<td>
								<!-- <span t-field="t.type_name"/> -->
								<a t-attf-href="/shop/product/{{t.type_id}}?{{keep_query()}}">
									<t t-esc="t.type_name" />
								</a>
							</td>
							<td>
								<span t-field="t.affiliate_type" />
							</td>
							<td>
								<span t-field="t.convert_date" />
							</td>
							<!-- <td><span t-field="t.amt_type"/></td> -->
							<td>
								<span t-field="t.commission_amt"
									t-options='{"widget": "monetary", "display_currency": t.currency_id}' />
							</td>
							<td>
								<span t-field="t.state" />
							</td>
						</tr>
					</t>
				</t>
				<p t-else="">There are currently no earnings for your account.</p>
			</t>

		</template>
		<template id="order_form" name="Order Show">
			<t t-call="portal.portal_layout">
				<t t-set="no_breadcrumbs" t-value="True" />
				<t t-set="affiliate_breadcrumbs_searchbar" t-value="True" />

				<t t-call="affiliate_management.affiliate_portal_searchbar">
					<t t-set="title">Order Report Detail</t>
				</t>

				<div class='o_portal_wrap my-3'>
					<div class="oe_structure" id="oe_structure_portal_affiliate_order_form" />
					<div class="row justify-content-center">
						<div class="col-md-12">
							<div class="card">
								<div class="card-body">
									<div class="mt16 mb-3">
										<div class="mb8">
											<strong>
												Date:
											</strong>
											<span t-field="order_visit_detail.convert_date"
												t-options='{"widget": "date"}' />
										</div>
										<div class="mb8">
											<strong>
												Order :
											</strong>
											<span t-field="order_visit_detail.name" />
										</div>
										<div class="mb8">
											<strong>
												Order State :
											</strong>
											<span t-field="order_visit_detail.state" />
										</div>
										<hr />
										<div class="row">
											<span class="col-md-2">
												<strong>
													Product Detail :
												</strong>
											</span>
											<span class="col-md-4">
												<span t-field="product_detail.name" />
											</span>
											<span class="col-md-2">
												<strong>
													Program :
												</strong>
											</span>
											<span class="col-md-4">
												<span
													t-field="order_visit_detail.affiliate_program_id.name" />
											</span>
										</div>
										<div class="row">
											<span class=" col-md-2">
												<strong>
													Commission Matrix :
												</strong>
											</span>
											<span class="col-md-4">
												<span t-field="order_visit_detail.amt_type" /> per
												item </span>
											<span class=" col-md-2">
												<strong>
													Commission On:
												</strong>
											</span>
											<span class="col-md-2">
												<span t-field="order_visit_detail.affiliate_type" />
												per item </span>
										</div>
										<div class="row">
											<span class="col-md-2">
												<strong>
													Quantity :
												</strong>
											</span>
											<span class="col-md-4">
												<span t-field="order_visit_detail.product_quantity" />
											</span>
											<span class="col-md-2">
												<strong>
													Unit price:
												</strong>
											</span>
											<span class="col-md-2">
												<span
													t-field="order_visit_detail.currency_id.symbol" />
												<span t-field="order_visit_detail.unit_price" />
											</span>
										</div>
										<div class="row">
											<span class="col-md-2">
												<strong>
													Commission Value :
												</strong>
											</span>
											<span class="col-md-4 ">
												<span
													t-field="order_visit_detail.currency_id.symbol" />
												<span t-field="order_visit_detail.commission_amt" />
											</span>
											<span class="col-md-2">
												<strong>
													Order Value :
												</strong>
											</span>
											<span class="col-md-2">
												<span t-field="order_visit_detail.price_total" />
											</span>
										</div>
										<div class="row">
											<span class="col-md-2">
												<strong>
													Invoice State :
												</strong>
											</span>
											<span class="col-md-4">
												<span
													t-field="order_visit_detail.act_invoice_id.state" />
												<t
													t-if="order_visit_detail.act_invoice_id.state == 'paid'">
													<span>
														<a
															t-attf-href="/my/invoice/{{order_visit_detail.act_invoice_id.id}}?{{keep_query()}}">
															<t
																t-esc="order_visit_detail.act_invoice_id.number" />
														</a>
													</span>
												</t>
											</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</t>

		</template>

		<!-- All Earnings List -->
		<template id="portal_my_affiliate_all_reports" name="My Affiliate All Reports">
			<t t-call="portal.portal_layout">
				<t t-set="no_breadcrumbs" t-value="True"/>
				<t t-set="affiliate_breadcrumbs_searchbar" t-value="True"/>
	
				<t t-call="affiliate_management.affiliate_portal_searchbar">
					<t t-set="title">All Earnings</t>
				</t>
				
				<div class="oe_structure" id="oe_structure_portal_all_affiliate_report" />
				<t t-if="commissions" t-call="portal.portal_table">
					<thead>
						<tr class="active">
							<th>Click To Check Details</th>
							<th>Item Name</th>
							<th>Item Type</th>
							<th>Convert Date</th>
							<th>Commission Value</th>
							<th>State</th>
						</tr>
					</thead>
					<t t-foreach="commissions" t-as="t">
						<tr>
							<td>
								<a t-if="t.affiliate_method == 'ppc'" t-attf-href="/my/traffic/{{t.id}}?{{keep_query()}}">
									<t t-esc="t.name" />
								</a>
								<a t-if="t.affiliate_method == 'pps'" t-attf-href="/my/order/{{t.id}}?{{keep_query()}}">
									<t t-esc="t.name" />
								</a>
							</td>
							<td>
								<t t-if="t.affiliate_type == 'product'">
									<a t-attf-href="/shop/product/{{t.type_id}}?{{keep_query()}}">
										<t t-esc="t.type_name" />
									</a>
								</t>
								<t t-if="t.affiliate_type == 'category'">
									<a t-attf-href="/shop/category/{{t.type_id}}?{{keep_query()}}">
										<t t-esc="t.type_name" />
									</a>
								</t>
							</td>
							<td>
								<span t-field="t.affiliate_type" />
							</td>
							<td>
								<span t-field="t.convert_date" />
							</td>
							<td>
								<span t-field="t.commission_amt" t-options='{"widget": "monetary", "display_currency": t.currency_id}'/>
							</td>
							<td>
								<span t-field="t.state" />
							</td>
						</tr>
					</t>
				</t>
				<p t-else="">There are currently no earnings for your account.</p>
			</t>
		</template>
	</data>
</odoo>
