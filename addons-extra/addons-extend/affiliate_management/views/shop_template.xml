<odoo>
	<data>
		<template id="shop_inherit_template" name="Shop Inherit Template" inherit_id="website_sale.products">
            <xpath expr="//table" position="after">
                <t t-nocache="Affiliate Link Popup">
                    <t t-if="referral_link and env.user.partner_id.is_affiliate and env.user.partner_id.res_affiliate_key">
                        <div id="aff_link_gen_div">
                            <label class="affiliate-btn btn btn-secondary" id="check_label">
                                <div>
                                    <p>
                                        <i class="fa fa-caret-up" />
                                    </p>
                                    <p>
                                        <span id="check_label2">Affiliate</span>
                                    </p>
                                </div>
                            </label>
                            <div class="card link-card-wrapper border shop-popup-wrapper" id="link-card-wrapper">
                                <div class="card-header link-card-header bg-secondary text-center"><h5>Affiliate</h5></div>
                                <div class="link-generate-form">
                                    <span class="d-none" id="aff_key" t-out="env.user.partner_id.res_affiliate_key" />
                                    <span class="d-none" id="db_name" t-out="request.session.get('db')" />
                                    <span style="font-size:1rem;">Your Affiliate Code: <strong><t class="ms-3" t-esc="env.user.partner_id.res_affiliate_key" /></strong></span>
                                    <br /><br />
                                    <strong class="mt-3">Your Referral Link</strong>
                                    <div class="input-group my-3">
                                        <input type="text" class="form-control bg-transparent" style="font-size:0.9rem;border:1px solid #584854;" aria-describedby="product-affiliate-link" id="usr_aff_url" readonly="1" t-att-value="referral_link" />
                                        <button class="btn btn-secondary copy-btn" type="button" id="cpy_url"><i class="fa fa-copy" />&amp;nbsp;Copy</button>
                                    </div>
                                    <br />
                                    <strong class="mt-2">Generate Product Banner</strong>
                                    <div class="container mt-2" style="text-align:center;width:100%;">
                                        <form role="form" t-attf-action="/search/product" method="post">
                                            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                            <div class="input-group">
                                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                <input type="name" name="name" t-att-value="name" id="name" class="form-control" required="required" autofocus="autofocus" placeholder="eg. Ipad mini" />
                                                <select name="categories" style="margin-bottom:10px;" class="form-select">
                                                    <option>All Categories</option>
                                                    <t t-foreach="categories" t-as="c">
                                                        <option t-att-selected="c.id==category.id"><t t-esc="c.name"/></option>
                                                    </t>
                                                </select>
                                                    <button type="submit" class="btn btn-outline-primary">Fetch</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </xpath>
        </template>

        <template id="product_inherit_template" name="Product Inherit Template" inherit_id="website_sale.product">
            <xpath expr="//section" position="after">
                <t t-nocache="Affiliate Link Popup"> 
                    <t t-if="affiliate_product_url and env.user.partner_id.is_affiliate and env.user.partner_id.res_affiliate_key">
                        <div id="aff_link_gen_div">
                            <label class="affiliate-btn btn btn-secondary" id="check_label">
                                <div>
                                    <p>
                                        <i class="fa fa-caret-up" />
                                    </p>
                                    <p>
                                        <span id="check_label2">Affiliate</span>
                                    </p>
                                </div>
                            </label>
                            <div class="card link-card-wrapper border" id="link-card-wrapper">
                                <div class="card-header link-card-header bg-secondary text-center"><h5>Affiliate</h5></div>
                                <div class="link-generate-form">
                                    <span class="d-none" id="aff_key" t-out="env.user.partner_id.res_affiliate_key" />
                                    <span class="d-none" id="db_name" t-out="request.session.get('db')" />
                                    <form t-attf-action="/tool/generate_banner" method="POST">
                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                        <input type="hidden" name="product_id" t-att-value="product.id"/>
                                        <span style="font-size:1rem;">Your Affiliate Code: <strong><t class="ms-3" t-esc="env.user.partner_id.res_affiliate_key" /></strong></span>
                                        <br />
                                        <br />
                                        <strong class="mt-3">Product Referral Link</strong>
                                        <div class="input-group my-3">
                                            <input type="text" class="form-control bg-transparent" readonly="1" style="font-size:0.9rem;border:1px solid #584854 !important;" id="usr_aff_url" aria-describedby="product-affiliate-link" t-att-value="affiliate_product_url" />
                                            <button class="btn btn-secondary copy-btn" type="button" id="cpy_url"><i class="fa fa-copy" />&amp;nbsp;Copy</button>
                                        </div>
                                        <strong class="mt-3">Generate Banner</strong><br />
                                        <button type="submit" class="btn btn-secondary cpy_cde mt-3" style="font-size:0.9rem" id="generate_btn">Generate Banner</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </t>
                </t>
            </xpath>
        </template>
    </data>
</odoo>
