<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="practice_request_portal_template" name="Practice Request Portal">
        <t t-call="portal.portal_layout">
            <div class="container">
                <div class="row content">
                    <p>Ingrese</p>
                </div>                
            </div>
            <table class="table table-striped"/>
            <h2>Mi solicitud de práctica</h2>
             <table class="table table-striped">

                        <tr>
                            <th><a t-att-href="'/my/practice_requests/new'"
                                       class="btn btn-primary">Nueva
                                    </a></th>
                        </tr>

             </table>
            <t t-if="not practice_requests">
                <p>Aún no has enviado ninguna solicitud de práctica.</p>
            </t>
            <t t-else="">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Curso</th>
                            <th>Tipo de práctica</th>
                            <th>Estado</th>
                            <th>Fecha de solicitud</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="practice_requests" t-as="practice_request">
                            <tr>
                                <td>
                                    <t t-esc="practice_request.id"/>
                                </td>
                                <td>
                                    <t t-esc="practice_request.course_id.course_id.name or 'N/A'"/>
                                </td>
                                <t t-set="practice_types_dict" t-value="{
                                        'on_site': 'Presencial',
                                        'distance': 'Distancia',
                                        'validation': 'Convalidación'
                                    }"/>
                                <td>
                                    <t t-esc="practice_types_dict.get(practice_request.practice_center_type_id.type_of_practice, 'N/A')"/>
                                </td>
                                <td>
                                    <t t-esc="dict(practice_request.fields_get(['state'])['state']['selection'])[practice_request.state]"/>
                                    <t t-if="practice_request.state == 'assigned'">
                                        <i class="fa fa-exclamation-circle text-warning" title="Assigned"></i>
                                    </t>
                                </td>
                                <td>
                                    <t t-esc="practice_request.request_date"/>
                                </td>
                                <td>
                                    <!--                                    <t t-if="practice_request.state == 'assigned'">-->
                                    <!--                                        <form method="POST" action="/my/practice_requests2/accept">-->
                                    <!--                                            <input type="hidden" name="request_id" t-att-value="practice_request.id"/>-->
                                    <!--                                            <button type="submit" class="btn btn-success btn-sm">Accept</button>-->
                                    <!--                                        </form>-->
                                    <!--                                        <form method="POST" action="/my/practice_requests2/decline">-->
                                    <!--                                            <input type="hidden" name="request_id" t-att-value="practice_request.id"/>-->
                                    <!--                                            <button type="submit" class="btn btn-danger btn-sm">Decline</button>-->
                                    <!--                                        </form>-->
                                    <!--                                    </t>-->
                                </td>
                                <td>
                                    <a t-att-href="'/my/practice_request/'+str(practice_request.id)"
                                       class="btn btn-primary">Revisar
                                    </a>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </t>
        </t>
    </template>


</odoo>
