<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template id="portal_my_gradebook">



        <t t-set="body_classname" t-value="'o_wprofile_body'"/>
        <t t-call="website.layout">
            <div id="wrap" class="o_wprofile_wrap mt-0">
                <t t-call="website_profile.user_profile_header"/>
                <div class="container">
                    <div class="row" style="font-size: 1rem !important;">
                        <!-- ========== SIDEBAR ========== -->
                        <t t-call="isep_website_custom.user_profile_sidebar"/>
                        <!-- ========== PROFILE CONTENT ========== -->
                        <div class="col-12 col-md-8 col-lg-9 position-relative">
                            <ul class="nav nav-tabs o_wprofile_nav_tabs flex-nowrap" role="tablist" id="profile_extra_info_tablist">
                                <li class="nav-item">
                                    <a role="tab" aria-controls="En proceso" href="#profile_tab_content_about" t-attf-class="nav-link #{'active' if not active_tab or active_tab == 'about' else ''}" data-bs-toggle="tab">Calificaciones
                                    </a>
                                </li>
                            </ul>


                            <div class="tab-content py-4 o_wprofile_tabs_content mb-4" id="profile_extra_info_tabcontent">
                                <div role="tabpanel" t-attf-class="tab-pane #{ 'show active' if not active_tab or active_tab == 'about' else '' }" id="profile_tab_content_about">
                                    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.4.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
                                    <div class="mb32">
                                        <div class="row">
                                            <h6>
                                                Estamos trabajando para mejorar tu experiencia, tus calificaciones
                                                estarán disponibles pronto.
                                                <br/>
                                                <strong>¡Continúa tu excelente trabajo y sigue alcanzando tus objetivos
                                                    académicos!
                                                </strong>
                                            </h6>
                                            <br/>
                                            <br/>
                                            <br/>
                                        </div>


                                        <t t-if="gradebook_ids">
                                            <t t-foreach="gradebook_ids" t-as="line">
                                                <div class="s_masonry_block o_colored_level" data-vcss="001" data-vxml="001" data-snippet="s_masonry_block" data-name="Cuadros" style="background-image: none;">
                                                    <div class="container">
                                                        <div class="row o_grid_mode" data-row-count="10">

                                                            <div t-if="line.state == 'in_progress'" class="o_grid_item text-center o_colored_level g-height-3 g-col-lg-2 col-lg-2 o_cc o_cc3 bg-900" data-name="Block" style="grid-area: 1 / 11 / 4 / 13; z-index: 3;">
                                                                <span>
                                                                    <strong>En proceso</strong>
                                                                </span>
                                                            </div>
                                                            <div t-if="line.state == 'done'" class="o_grid_item text-center o_colored_level g-height-3 g-col-lg-2 col-lg-2 o_cc o_cc3 bg-900" data-name="Block" style="grid-area: 1 / 11 / 4 / 13; z-index: 3;">
                                                                <span>
                                                                    <strong>Finalizado</strong>
                                                                </span>
                                                            </div>


                                                            <div class="o_grid_item text-center o_colored_level g-height-2 g-col-lg-10 col-lg-10 o_cc o_cc4" data-name="Block" style="z-index: 4; grid-area: 1 / 1 / 3 / 11; background-color: rgba(0, 0, 0, 0); background-image: linear-gradient(135deg, rgb(193, 103, 1) 0%, rgb(0, 52, 107) 100%);">
                                                                <span>
                                                                    <strong>Programa académico:</strong>
                                                                </span>
                                                                <span style="font-size: 1.3em;">
                                                                    <strong>
                                                                        <span t-esc="line.course_id.code"/>
 -                                                                        <span t-esc="line.course_id.name"/>
                                                                    </strong>
                                                                </span>
                                                            </div>

                                                            <div class="o_grid_item text-center o_colored_level g-height-1 g-col-lg-5 col-lg-5 o_cc o_cc5 bg-900" data-name="Block" style="z-index: 2; grid-area: 3 / 1 / 3 / 6;">
                                                                <span style="text-align: left">
                                                                    <strong>Grupo:</strong>
                                                                    <span t-esc="line.batch_id.name or 'No asignado' "/>
                                                                </span>
                                                            </div>

                                                            <div class="o_grid_item text-center o_colored_level g-height-1 g-col-lg-5 col-lg-5 o_cc o_cc5 bg-900" data-name="Block" style="z-index: 5; grid-area: 3 / 6 / 3 / 11;">
                                                                <span style="text-align: right">
                                                                    <strong>Nro. admisión:</strong>
                                                                    <span t-esc="line.admission_id.application_number or 'No asignado' "/>
                                                                </span>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="s_faq_collapse pb32 o_colored_level pt0" data-snippet="s_faq_collapse" data-name="Acordeón" style="background-image: none;">
                                                    <div class="container">
                                                        <table class="table">
                                                            <thead>
                                                                <tr>
                                                                    <td style="padding:0px">
                                                                        <div class="card" data-name="Item" style="border-radius: 0rem !important;background: #344a5e;color: #ffffff;font-weight: bold;">
                                                                            <div href="#" style="padding: 0px;padding-left: 2em;display: flex;" role="tab" class="card-header">
                                                                                <div class="col-1" style="width: 10%;">
                                                  Cod.
                                                                                </div>
                                                                                <div class="col-10" style="width: 75%;">
                                                  Asignatura.
                                                                                </div>
                                                                                <div class="col-1 text-end" style="width: 15%; padding-right: 0.3em;">
                                                  Calificación
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr>
                                                                    <th style="padding: 0rem 0rem;">
                                                                        <div id="myCollapse" class="accordion" role="tablist">
                                                                            <t t-foreach="line.gradebook_subject_ids" t-as="subject">
                                                                                <div class="card" data-name="Item">
                                                                                    <a href="#" style="padding: 0px;padding-left: 2em;display: flex;color: rgb(74, 123, 140);" role="tab" data-bs-toggle="collapse" aria-expanded="false" class="card-header  collapsed" t-attf-data-bs-target="#{'#myCollapseTab_' + str(subject.id) }">

                                                                                        <div class="col-1" style="width: 10%;">
                                                                                            <span t-esc="subject.op_subject_id.code or 'ERROR'"/>

                                                                                        </div>
                                                                                        <div class="col-10" style="width: 75%;">
                                                                                            <span t-esc="subject.op_subject_id.name or 'ERROR'"/>
                                                                                        </div>
                                                                                        <div class="col-1 text-end" style="width: 15%;padding-right: 1em;">

                                                                                            <span t-if="subject.gradebook_student_id.state == 'done' " t-esc="'{0:,.2f}'.format(subject.final_subject_note)"/>
                                                                                            <span t-if="subject.gradebook_student_id.state == 'in_progress' ">...</span>

                                                                                        </div>

                                                                                    </a>
                                                                                    <div data-bs-parent="#myCollapse2" role="tabpanel" t-attf-id="#{'myCollapseTab_' + str(subject.id) }" class="collapse">
                                                                                        <div style="padding-bottom: 25px;padding-top: 15px;padding-left: 2em;">


                                                                                            <table class="col-12">
                                                                                                <tbody>
                                                                                                    <t t-foreach="subject.gradebook_result_ids" t-as="result">
                                                                                                        <tr style="border-bottom: 1px solid #d8d8d8;">
                                                                                                            <td class="col-1" style="width: 10%;">
                                                                                                                <span t-if="result.survey_type == 'exam'">Examen</span>
                                                                                                                <span t-if="result.survey_type == 'assignment'">Asignación</span>
                                                                                                                <span t-if="result.survey_type == 'interaction'">interacción</span>
                                                                                                                <span t-if="result.survey_type == 'foro'">Foro</span>
                                                                                                            </td>
                                                                                                            <td class="col-10" style="width: 75%;">
                                                                                                                <span t-esc="result.description"/>
                                                                                                                <a t-if="result.comment" href="#" data-bs-toggle="modal" t-attf-data-bs-target="#{'#helpModal_' + str(result.id) }" class="text-primary">
                                                                                                                    <i class="fa fa-comment"/>
                                                                                                                </a>
                                                                                                                <div t-if="result.comment" class="modal fade" t-attf-id="#{'helpModal_' + str(result.id) }" tabindex="-1" aria-labelledby="helpModalLabel" aria-hidden="true">
                                                                                                                    <div class="modal-dialog">
                                                                                                                        <div class="modal-content">
                                                                                                                            <div class="modal-header">
                                                                                                                                <h5 class="modal-title" id="helpModalLabel">Comentario</h5>
                                                                                                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"/>
                                                                                                                            </div>
                                                                                                                            <div class="modal-body">
                                                                                                                                <span t-esc="result.comment"/>
                                                                                                                            </div>
                                                                                                                            <div class="modal-footer">
                                                                                                                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                
                                                                                                            </td>
                                                                                                            <td class="col-1 text-end" style="width: 15%;padding-right: 1em;">
                                                                                                                <span t-esc="'{0:,.2f}'.format(result.scoring_total)" class="fw-bold"/>
                                                                                                            </td>
                                                                                                        </tr>
                                                                                                    </t>
                                                                                                </tbody>
                                                                                            </table>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </t>
                                                                        </div>
                                                                    </th>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </t>
                                        </t>
                                        
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>

        <!-- ========== CONTENT ========== -->
    </template>
</odoo>
