<odoo>
    <record id="view_dv_data_target_tree" model="ir.ui.view">
        <field name="name">dv.data.target.tree</field>
        <field name="model">dv.data.target</field>
        <field name="arch" type="xml">
            <tree multi_edit="1">
                <field name="sequence" widget="handle"/>
                <field name="name"/>
                <field name="data_source_id"/>
                <field name="model_id"/>
                <field name="color" widget="color_picker" optional="show"/>
                <field name="tdone" widget="boolean_toggle"/>
                <field name="note" optional="hide"/>
                <header>
                    <button name="export_data_targets_button" string="Export Data Targets JSON" type="object" class="btn-primary" />
                </header>
            </tree>
            
        </field>
    </record>
    <record id="ir_actions_ejecution_target" model="ir.actions.server">
        <field name="name">⇌ Ejecutar Sync masivo ⇌</field>
        <field name="model_id" ref="model_dv_data_target"/>
        <field name="state">code</field>
        <field name="code">
            for ti in records:
                ti.massive_ejecution()
        </field>
        <field name="binding_model_id" ref="model_dv_data_target"/>
        <field name="binding_type">action</field>
        <field name="binding_view_types">list,form</field>
    </record>
    <record id="view_dv_data_target_form" model="ir.ui.view">
        <field name="name">dv.data.target.form</field>
        <field name="model">dv.data.target</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button name="action_show_query_result" type="object" class="btn-primary" string="Show Results" accesskey="e"/>
                    <button name="button_ejecution" type="object" class="btn-warning" string="Sync completo" accesskey="r"/>
                    <button name="action_delete_chatter" type="object" string="Borrar Chatter" class="btn-danger"/>
                    
                </header>
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="data_source_id"/>
                        <field name="allow_parcial_transaction"/>
                        <field name="query" widget="code"/>
                    </group>
                    <group>
                        <field name="origin_primary_key"/>
                        <field name="model_id" options="{'no_quick_create': True,'no_create_edit': True}"/>
                        <field name="target_external_id" options="{'no_quick_create': True,'no_create_edit': True}"/>
                        <field name="tdone" widget="boolean_toggle"/>
                        <field name="color" widget="color_picker" />
                    </group>
                    
                    <notebook>
                        <page string="Results">
                            <field name="result" widget="html" nolabel="1" />
                            <button name="method_sync_button" type="object" string="Sync Data" class="oe_highlight"/>
                        </page>
                        <page string="Field Mapping">
                            <div class="row mt16">
                                <div class="col-lg-9">
                                    <label for="method"/>: <field name="method"/>
                                </div>
                                <div class="col-lg-2">
                                    <button name="method_sync_button" type="object" string="Sync Data" class="oe_highlight" accesskey="s"/>
                                </div>
                            </div>
                            <field name="field_ids" >
                                <tree editable="bottom">
                                    <field name="origin_column_type"/>
                                    <field name="origin_column"/>
                                    <field name="field_id" options="{'no_quick_create': True,'no_create_edit': True}"/>
                                    <field name="field_ttype" />
                                    <field name="field_mrelated" />
                                    <field name="field_check_result" optional="hide"/>
                                </tree>
                            </field>
                            <button name="method_sync_button" type="object" string="Sync Data" class="oe_highlight"/>
                        </page>
                        <page string="Field Mapping no store">
                            <div class="row mt16">
                                <div class="col-lg-9">
                                    <label for="active_c_xmlrpc"/>: <field name="active_c_xmlrpc" widget="boolean_toggle"/>
                                    <label for="model_dv_id"/>: <field name="model_dv_id" options="{'no_quick_create': True,'no_create_edit': True}"/>
                                </div>
                                <div class="col-lg-3">
                                    <button name="migrar_datos" type="object" string="Sync Data No stored" class="oe_highlight" accesskey="d"/>
                                </div>
                            </div>
                            <field name="field_noalma_ids">
                                <tree editable="bottom">
                                    <field name="origin_column_type"/>
                                    <field name="origin_column"/>
                                    <field name="field_id" options="{'no_quick_create': True,'no_create_edit': True}"/>
                                    <field name="field_ttype" />
                                    <field name="field_mrelated" />
                                    <field name="field_check_result" optional="hide"/>
                                </tree>
                            </field>
                            <button name="migrar_datos" type="object" string="Sync Data No stored" class="oe_highlight"/>
                        </page>
                        <page string="Notas">
                            <field name="note" nolabel="1"/>
                        </page>
                    </notebook>
                    
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" />
                    <field name="activity_ids" widget="mail_activity" />
                    <field name="message_ids" widget="mail_thread" />
                </div>
            </form>
        </field>
    </record>
</odoo>
